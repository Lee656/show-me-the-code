{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block link %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs-3.3.7/dt-1.10.15/datatables.min.css"/>
{% endblock %}

{% block body %}
{% if not session.user %}
<div class="jumbotron">
    <h1>To Do List Application!</h1>
    <p>Powered by Flask, SQLalchemy, Sqlite3, Git, Bootstrap, etc...<p>
    <p>Author: tiny656</p>
    <p>Date: 2017-07-29</p>
</div>
{% else %}
<div class="row">
    <div class="col-md-6 col-md-offset-3">
        <form class="form-group" method="post" action="/wunderlist/">
            <div class="input-group">
                <input type="text" class="form-control" name="content" placeholder="Write your to do thing here..." required="">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>
                </span>
            </div>
        </form>
    </div>
</div>
<div class="row">
    <div class="col-md-12"> 
        {% if data.get('not_done') %}
        <table id="not_done" class="table table-hover table-condensed">
            <thead>
                <th class="text-center">序号</th>
                <th class="text-center">内容</th>
                <th class="text-center">日期</th>
                <th class="text-center">操作</th>
            </thead>
            <tbody>
                {% for item in data.get('not_done') %}
                <tr>
                    <td class="text-center">{{ loop.index }}</td>
                    <td class="text-center">{{ item.content }}</td>
                    <td class="text-center">{{ item.date }}</td>
                    <td class="text-center">完成 | 删除</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>
</div>
{% endif %}
{% endblock %}

{% block script %}
<script type="text/javascript" src="https://cdn.datatables.net/v/bs-3.3.7/dt-1.10.15/datatables.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("#not_done").DataTable({
        "ordering": true,
        "info": false,
        "lengthMenu": [[10, 25, 50], [10, 25, 50]]
    });
});
</script>
{% endblock %}
